@using PagedList;
@using PagedList.Mvc;
@model PagedList<KinderFirst.Models.GalleryItem>
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />
@{
    ViewBag.Title = "Gallery";
}
@Html.ActionLink("Участвай", "GetUploadForm", "Pictures", null, new { @class = "modal-link btn btn-success" })
<div class="row">
 
    @{
        foreach (var item in Model)
        {
            if (item.PicLink == null)
            {
                item.PicLink = "~/Content/Images/ft.png";
            }
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
               
                    <img class="picmain" src="@Url.Content(item.PicLink)" />
                    <div>
                        <span id="@String.Format("timeDisplay{0}",item.Id)">@item.Likes</span>

                        <span>
                            @Ajax.ActionLink("Like", "Like", new { itemId = item.Id },
    new AjaxOptions
    {
        UpdateTargetId = "timeDisplay" + item.Id,
        LoadingElementId = "timeDisplayLoading",
        HttpMethod = "GET",
        InsertionMode = InsertionMode.Replace,
        OnBegin = "OnAjaxRequestBegin",
        OnFailure = "OnAjaxRequestFailure",
        OnSuccess = "OnAjaxRequestSuccess",
        OnComplete = "OnAjaxRequestComplete"

    })
                        </span>
                    </div>
                    <div id="timeDisplayLoading" style="display: none">Loading...</div>

                </div>
                }
                }
            </div>
@Html.PagedListPager(Model, page => Url.Action("Gallery", "Pictures", new { page }))
    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

<script type="text/javascript">
    function OnAjaxRequestBegin() {
        console.log("This is the OnBegin Callback");
    }
    function OnAjaxRequestSuccess(data) {
        console.log("This is the OnSuccessCallback: " + data);
    }
    function OnAjaxRequestFailure(request, error) {
        debugger;
        console.log("This is the OnFailure Callback:" +request.responseText);
    }
    function OnAjaxRequestComplete(request, status) {
        console.log("This is the OnComplete Callback");
        console.log(request);
    }
</script>